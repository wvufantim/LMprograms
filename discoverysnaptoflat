#!/bin/bash

# Unlink Snap store from plasma-discover
echo "Unlinking Snap store from plasma-discover..."
qdbus org.kde.discover /org/kde/discover org.kde.discover.UnsetSnapBackend
echo "Snap store unlinked from plasma-discover."

# Link Flathub to plasma-discover
echo "Linking Flathub to plasma-discover..."
qdbus org.kde.discover /org/kde/discover org.kde.discover.SetFlatpakBackend
echo "Flathub linked to plasma-discover."

# Restart Discover to apply changes
echo "Restarting Discover to apply changes..."
kquitapp5 discover
sleep 2
kstart5 discover
echo "Discover restarted."

echo "Done."
